<div class="container-fluid h-100 sign-out p-sm-0">
    <div class="row h-100 sign-bg p-sm-0 m-sm-0">
        <div class="sign-circle1"></div>
        <div class="sign-circle2"></div>
        <div class="col-12 row h-100 py-lg-5 p-sm-0">
            <div class="form col-md-7 col-lg-5 col-sm-12 mb-md-5 mx-auto d-flex flex-column justify-content-center align-items-center signin-card">
                <p id="tit" class="text-center mt-lg-3 mt-md-3 animate__animated animate__flipInY">Sign In</p>
                <div class="flex-fill w-100 px-3">
                    <form action="" name="form1" class="animate__animated" id="form1">
                        <div class="input-group mb-4">
                            <span class="input-group-text m-0">
                                <i class="fa-solid fa-user"></i>
                            </span>
                            <div class="form-floating">
                              <input type="text" class="form-control" id="username" name="username" placeholder="Username" data-bs-toggle="tooltip" data-bs-placement="top"data-bs-custom-class="custom-tooltip"data-bs-title="username: aptech">
                              <label for="email">Username</label>
                            </div>
                        </div>
                        <div class="input-group">
                            <span class="input-group-text m-0">
                                <i class="fa-sharp fa-solid fa-lock"></i>
                            </span>
                            <div class="form-floating">
                              <input type="password" class="form-control" id="passw" name="passw" placeholder="Password" data-bs-toggle="tooltip" data-bs-placement="top"data-bs-custom-class="custom-tooltip"data-bs-title="password: aptech">
                              <label for="password">Password</label>
                            </div>
                        </div>
                        <span class="text-danger" id="fail" style="display: none;">Username or Password is not correct<br></span>
                        <a data-bs-toggle="tooltip" data-bs-placement="top"data-bs-custom-class="custom-tooltip"data-bs-title="username: aptech password:aptech" style="color: #FF7700;" class="mb-4 mt-5">Forgot Password?</a>
                        <div class="text-center mb-lg-5 mt-3 mb-md-1">
                            <input type="button" onclick="signin()" value="Sign In" class="btn w-50 btn-orange fw-bold fs-5" style="height: 40px;">
                        </div>
                        <div class="d-flex w-100 flex-column justify-content-center align-items-center my-4 sign-logo">
                            <p class="text-center">or</p>
                            <div>
                                <img src="image/google_logo.png" alt="google" style="width: 30px;height: 30px; margin-right: 10px;">
                                <img src="image/facebook_logo.png" alt="facebook" style="width: 30px;height: 30px;margin-right: 10px;">
                                <img src="image/twitter_logo.png" alt="" style="width: 30px;height: 30px;">
                            </div>
                        </div>
                        <div class="d-flex flex-row align-items-center">
                            <p class="flex-fill text-end mx-4">Don't have an account? <a class="sign-up" style="color:#FF7700">Sign Up</a></p>
                            <a class="sign-up"><i class="fa-solid fa-arrow-right" style="font-size: 3rem;color:#FF7700"></i></a>
                        </div>
                    </form>
                    <form action="" name="form2" id="form2" class="row mt-3 animate__animated " style="display: none; ">
                        <div class="col-12 row mb-3">
                            <label for="first_name" class="col-form-label col-3">First Name</label>
                            <div class="col-3">
                                <input type="text" name="first_name" id="first_name" class="form-control">
                            </div>
                            <label for="last_name" class="col-form-label col-3 text-end">Last Name</label>
                            <div class="col-3">
                                <input type="text" name="last_name" id="last_name" class="form-control">
                            </div>
                        </div>
                        <div class="col-12 row mb-3">
                            <label for="gender" class="col-form-label col-3">Gender</label>
                            <div class="col-9">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="gender" id="inlineRadio1" value="female">
                                    <label class="form-check-label" for="inlineRadio1">Female</label>
                                  </div>
                                  <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="gender" id="inlineRadio2" value="male">
                                    <label class="form-check-label" for="inlineRadio2">Male</label>
                                  </div>
                                  <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="gender" id="inlineRadio4" value="other">
                                    <label class="form-check-label" for="inlineRadio3">Other</label>
                                  </div>
                            </div>
                            <span></span>
                        </div>
                        <div class="col-12 row mb-3">
                            <label for="age" class="col-form-label col-3">Age</label>
                            <div class="col-9">
                                <input type="text" name="age" id="age" class="form-control" style="width: 100px;">
                                <span class="text-danger" id="valiAge" style="display: none;">Age is invalid</span>
                            </div>
                        </div>
                        <div class="col-12 row mb-3">
                            <label for="email" class="col-form-label col-3">Username</label>
                            <div class="col-9">
                                <input type="text" name="username_c" id="username_c" class="form-control">
                                <span class="text-danger" id="valiUser" style="display: none;">This username was created</span>
                            </div>
                        </div>
                        <div class="col-12 row mb-3">
                            <label for="pass1" class="col-form-label col-3">Password</label>
                            <div class="col-9">
                                <input type="password" name="pass1" id="pass1" class="form-control">
                                <span id="passalter1" class="text-danger" style="display: none;">Password is require at 6 characters contains at least 1 uppercase character, 1 lowercase character and 1 number</span>
                            </div>
                        </div>
                        <div class="col-12 row mb-3">
                            <label for="pass2" class="col-form-label col-3">Confirm Password</label>
                            <div class="col-9">
                                <input type="password" name="pass2" id="pass2" class="form-control">
                                <span id="passalter2" class="text-danger" style="display: none;">Password is not match</span>
                            </div>
                        </div>
                        <span id="form-vali"></span>
                        <div class="text-center mb-2 mt-1">
                            <input type="button" value="Sign Up" name="submit"class="btn w-50 btn-orange fw-bold fs-5" style="height: 40px;" disabled>
                        </div>
                        <div class="d-flex flex-row align-items-center mb-4">
                            <a class="sign-in"><i class="fa-solid fa-arrow-left" style="font-size: 3rem;color:#FF7700"></i></a>
                            <p class="flex-fill text-start mx-4">Already have an account? <a class="sign-in" style="color:#FF7700">Sign In</a></p>
                        </div>
                    </form>
                </div>
            </div>
            <div class="form col-md-4 col-lg-4 col-sm-12 row signin-card px-lg-4 py-lg-4 py-md-2 mx-lg-5 sign-list" style="height: fit-content;">
                    <a href="" class="text-decoration-none text-dark mb-2" style="padding-left: 50px;">
                        <img src="image/google_logo.png" class="" width="30"> &nbsp; Sign in by Google
                    </a>
                    <hr style="margin: 5px 0;">
                    <a href="" class="text-decoration-none text-dark mb-2" style="padding-left: 50px;">
                        <img src="image/facebook_logo.png" alt="" width="30"> &nbsp; Sign in by Facebook
                    </a>
                    <hr style="margin: 5px 0;">
                    <a href="" class="text-decoration-none text-dark mb-2" style="padding-left: 50px;"> 
                    <img src="image/twitter_logo.png" alt="" width="30"> &nbsp; Sign in by Twitter</a>
            </div>
        </div>
    </div>
</div>
<script src="js/main.js"></script>
<script>
    const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]');
    const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl));
    $('main').scrollTop(0);
    $('#btn-scrollTop').hide();
    let currentUser = localStorage.getItem('user');
    $('.sign-in').click(function(event){
        event.preventDefault();
        $('#tit').text("Sign In").toggleClass('animate__flipInY');
        $('#form2').removeClass('animate__flipInY').hide();
        $('#form1').addClass('animate__flipInY').show();
    });
    $('.sign-up').click(function(event){
        event.preventDefault();
        $('#tit').text("Sign Up").toggleClass('animate__flipInY');
        $('#form1').removeClass('animate__flipInY').hide();
        $('#form2').addClass('animate__flipInY').show();
    });
    let arr_acc = [
        {name: "aptech", pass:"aptech"},
        {guest: "guest",pass: "Abc123"}
    ]
    const signin = () => {
        for(let i = 0; i< arr_acc.length;i++){
            if($('input[name="username"]').val() == arr_acc[i].name && $('input[name="passw"]').val()==arr_acc[i].pass){
                let userN = $('input[name="username"]').val();
                alert("Sign in successfully!");
                localStorage.setItem('user',userN);
                location.href='index.html';
                break;
            }else{
                $('#fail').show();
            }
        }
    };
    const checkAge = ()=>{
        let ageb = $('input[name="age"]').val();
        let reg = /^(?!0)\d{1,2}$/gi;
        if(reg.test(ageb)){
            $('#valiAge').hide();
            return true;
        }else{
            $('#valiAge').show();
            return false;
        };
    }
    const checkUserName = ()=>{
        let us = $('input[name="username_c"]').val();
        arr_acc.forEach(ele=>{
            if(ele.name === us){
                $('#valiUser').show();
                return false;
            }else{
                $('#valiUser').hide();
                return true;
            }
        });
    };
    const validatePass = ()=>{
        let reg = /(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{6,}/;
        let pas = $('input[name="pass1"]').val();
        if(reg.test(pas)){
            $('#passalter1').hide();
            return true;
        }else{
        $('#passalter1').show();
            return false;
        };
    }
    $('input').on('blur',function(){
        $('input[name="age"]').on('blur',function(event){
            checkAge();
        });
        $('input[name="username_c"]').on('blur',function(event){
            checkUserName();
        });
        $('input[name="pass1"]').on('blur',function(){
            validatePass();
        });
        $('input[name="pass2"]').on('blur',function(){
            let check = ($('input[name="pass1"]').val() !==  $(this).val())?$('#passalter2').show(): $('#passalter2').hide();    
        });
        let passw1 = $('input[name="pass1"]').val();
        let passw2 = $('input[name="pass2"]').val();
        console.log(validatePass());
        console.log(passw1 === passw2);
        if($('input[name="first_name"]').val() !== "" &&$('input[name="last_name"]').val() !== "" && $('input[name="gender"]:checked').val() && $('input[name="username_c"]').val() !== "" && validatePass() && passw1 === passw2){
            $('input[name="submit"]').removeAttr('disabled');
        };
    });
    $('input[name="submit"]').on('click',function(event){
        let userN = $('input[name="username_c"]').val();
        let passC = $('input[name="pass1"]').val();
        document.cookie = `username=${userN}`;
        alert('Create account successfully');
        localStorage.setItem('user',userN);
        location.href='index.html';
    })
</script>